<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="BaseUser">

    <select id="findByUserName" parameterType="map" resultType="map">
        select * from base_user where PROJECT_CODE = #{projectCode}
        <if test="TELPHONE_LOGIN == 1">
            and (USERNAME = #{username} or TELPHONE = #{username})
        </if>
        <if test="TELPHONE_LOGIN == 0">
           and USERNAME = #{username}
        </if>
    </select>

    <update id="resetPwd" parameterType="map">
        UPDATE base_user
        set PASSWORD = #{PASSWORD}
        where ID = #{ID}
    </update>

    <select id="countByRoleId" parameterType="string" resultType="long">
        select count(*) from base_user where BASE_ROLE_ID = #{_parameter}
    </select>

    <select id="countByRoleIds" parameterType="list" resultType="long">
        select count(*) from base_user where BASE_ROLE_ID IN
        <foreach collection="list" item="item" open="(" separator="," close=")">
            #{item}
        </foreach>
    </select>

</mapper>
